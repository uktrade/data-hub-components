{"version":3,"file":"main.d81d828ba597cac77ddc.bundle.js","sources":["webpack:///./src/forms/hooks/useField.js"],"sourcesContent":["import { useEffect } from 'react'\nimport { isEmpty } from 'lodash'\n\nimport useFormContext from './useFormContext'\n\nfunction useField({ name, initialValue = '', validate = null, required = null }) {\n  const {\n    registerField,\n    deregisterField,\n    setFieldTouched,\n    setFieldValue,\n    getFieldState,\n  } = useFormContext()\n\n  function prepareValidators() {\n    const validators = Array.isArray(validate) ? validate : [validate].filter(v => v)\n\n    if (required) {\n      validators.unshift(value => (isEmpty(value) ? required : null))\n    }\n\n    return validators\n  }\n\n  useEffect(\n    () => {\n      registerField({ name, initialValue, validate: prepareValidators() })\n\n      return () => {\n        deregisterField(name)\n      }\n    },\n    [name],\n  )\n\n  const fieldState = getFieldState(name)\n\n  return {\n    name,\n    value: fieldState.value,\n    error: fieldState.error,\n    touched: fieldState.touched,\n    onChange: e => setFieldValue(name, e.target.value),\n    onBlur: () => setFieldTouched(name, true),\n  }\n}\n\nexport default useField\n"],"mappings":"AA+CA","sourceRoot":""}